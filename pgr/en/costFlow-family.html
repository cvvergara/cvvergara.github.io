<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Minimum Cost Maximum FLow - Family of functions &#8212; pgRouting Manual (3.0-dev)</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'v3.0.0-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pgr_minCostMaxFlow_Cost - Experimental" href="pgr_minCostMaxFlow_Cost.html" />
    <link rel="prev" title="pgr_bridges - Experimental" href="pgr_bridges.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pgrouting.png"></span>
          pgRouting</a>
        <span class="navbar-text navbar-version pull-left"><b>v3.0.0-dev</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Sample Data</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-concepts.html">pgRouting Concepts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgr_version.html">pgr_version</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="topology-functions.html">Topology - Family of Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="routingFunctions.html">Routing Functions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Stable Proposed Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="proposed.html#experimental-functions">Experimental Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Minimum Cost Maximum FLow - Family of functions</a><ul>
<li><a class="reference internal" href="#minimum-cost-maximum-flow-functions-general-information">Minimum Cost Maximum Flow Functions General Information</a></li>
<li><a class="reference internal" href="#problem-definition">Problem definition</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="pgr_bridges.html" title="Previous Chapter: pgr_bridges - Experimental"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; pgr_bridges -...</span>
    </a>
  </li>
  <li>
    <a href="pgr_minCostMaxFlow_Cost.html" title="Next Chapter: pgr_minCostMaxFlow_Cost - Experimental"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">pgr_minCostMa... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="minimum-cost-maximum-flow-family-of-functions">
<span id="costflow"></span><h1>Minimum Cost Maximum FLow - Family of functions<a class="headerlink" href="#minimum-cost-maximum-flow-family-of-functions" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Experimental functions</p>
<ul class="last simple">
<li>They are not officially of the current release.</li>
<li>They likely will not be officially be part of the next release:<ul>
<li>The functions might not make use of ANY-INTEGER and ANY-NUMERICAL</li>
<li>Name might change.</li>
<li>Signature might change.</li>
<li>Functionality might change.</li>
<li>pgTap tests might be missing.</li>
<li>Might need c/c++ coding.</li>
<li>May lack documentation.</li>
<li>Documentation if any might need to be rewritten.</li>
<li>Documentation examples might need to be automatically generated.</li>
<li>Might need a lot of feedback from the comunity.</li>
<li>Might depend on a proposed function of pgRouting</li>
<li>Might depend on a deprecated function of pgRouting</li>
</ul>
</li>
</ul>
</div>
<ul class="simple">
<li><a class="reference internal" href="pgr_minCostMaxFlow_Cost.html#pgr-mincostmaxflow-cost"><span class="std std-ref">pgr_minCostMaxFlow_Cost - Experimental</span></a> - Only the Min Cost calculation.</li>
<li><a class="reference internal" href="pgr_minCostMaxFlow.html#pgr-mincostmaxflow"><span class="std std-ref">pgr_minCostMaxFlow - Experimental</span></a> - Details of flow and cost on edges.</li>
</ul>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="minimum-cost-maximum-flow-functions-general-information">
<h2>Minimum Cost Maximum Flow Functions General Information<a class="headerlink" href="#minimum-cost-maximum-flow-functions-general-information" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Characteristics</p>
<ul class="simple">
<li>The graph is <strong>directed</strong>.</li>
<li>Process is done only on edges with positive capacities.</li>
<li><strong>The cost value of all input edges must be nonnegative.</strong></li>
<li>When the maximum flow is 0 then there is no flow and <strong>EMPTY SET</strong> is returned.<ul>
<li>There is no flow when a <strong>source</strong> is the same as a <strong>target</strong>.</li>
</ul>
</li>
<li>Any duplicated value in the source(s) or target(s) are ignored.</li>
<li>Calculates the flow/residual capacity and cost for each edge and agg_cost for the graph. In the output<ul>
<li>Edges with zero flow are omitted.</li>
</ul>
</li>
<li>Creates a <strong>super source</strong> and edges to all the source(s), and a <strong>super target</strong> and the edges from all the targets(s).</li>
<li>The minimum cost through the graph is guaranteed to be the value returned by <a class="reference internal" href="pgr_minCostMaxFlow_Cost.html#pgr-mincostmaxflow-cost"><span class="std std-ref">pgr_minCostMaxFlow_Cost</span></a> when executed with the same parameters and can be calculated:<ul>
<li>By aggregation of the outgoing flow cost from the sources</li>
<li>By aggregation of the incoming flow cost to the targets</li>
</ul>
</li>
</ul>
<p><a class="reference internal" href="pgr_minCostMaxFlow.html#pgr-mincostmaxflow"><span class="std std-ref">pgr_minCostMaxFlow</span></a>  is the minimum cost and that minimum is guaranteed to be the same on the functions <a class="reference internal" href="pgr_minCostMaxFlow.html#pgr-mincostmaxflow"><span class="std std-ref">pgr_minCostMaxFlow</span></a>, but the actual flow through each edge may vary.</p>
</div>
<div class="section" id="problem-definition">
<h2>Problem definition<a class="headerlink" href="#problem-definition" title="Permalink to this headline">¶</a></h2>
<p>A flow network with cost is a directed graph where each edge has a capacity, a flow and a cost.
For each edge <span class="math">\((u, v)\)</span> in the given graph, it has capacity <span class="math">\(c(u, v) &gt; 0\)</span>, flow <span class="math">\(f(u, v) &gt;= 0\)</span> and cost <span class="math">\(a(u, v) &gt;= 0\)</span>.</p>
<p><span class="math">\(f(u, v) &lt;= c(u, v)\)</span></p>
<p>The cost of sending this flow along an edge <span class="math">\((u, v)\)</span> is <span class="math">\(f(u, v) * a(u, v)\)</span>.
Additionally, the incoming and outgoing flow of a node must be equal except the for source which only has outgoing flow, and the destination(sink) which only has incoming flow.</p>
<p>Minimum Cost Maximum flow algorithms calculate the minimum cost maximum flow through the graph and the flow/cost of each edge.</p>
<p>Given the following query:</p>
<p>pgr_minCostMaxFlow <span class="math">\((edges\_sql, source\_vertex, sink\_vertex)\)</span></p>
<p>where <span class="math">\(edges\_sql = \{(id_i, source_i, target_i, capacity_i, reverse\_capacity_i, cost_i, reverse\_cost_i)\}\)</span></p>
<p class="rubric">Graph definition</p>
<p>The weighted directed graph, <span class="math">\(G(V,E)\)</span>, is defined as:</p>
<ul class="simple">
<li>the set of vertices  <span class="math">\(V\)</span><ul>
<li><span class="math">\(source\_vertex  \cup  sink\_vertex  \bigcup  source_i  \bigcup  target_i\)</span></li>
</ul>
</li>
<li>the set of edges <span class="math">\(E\)</span><ul>
<li><span class="math">\(E = \begin{cases}
\text{ } \{(source_i, target_i, capacity_i, cost_i) \text{ when } capacity &gt; 0 \} &amp; \quad  \text{ if } reverse\_capacity = \varnothing \\
\text{ } &amp; \quad \text{ } \\
\{(source_i, target_i, capacity_i, cost_i) \text{ when } capacity &gt; 0 \} &amp; \text{ } \\
\cup \{(target_i, source_i, reverse\_capacity_i, reverse\_cost_i) \text{ when } reverse\_capacity_i &gt; 0)\} &amp; \quad \text{ if } reverse\_capacity \neq \varnothing \\ \end{cases}\)</span></li>
</ul>
</li>
</ul>
<p class="rubric">Minimum Cost Maximum Flow problem</p>
<p>Given:</p>
<ul class="simple">
<li><span class="math">\(G(V,E)\)</span></li>
<li><span class="math">\(source\_vertex \in V\)</span> the source vertex</li>
<li><span class="math">\(sink\_vertex \in V\)</span> the sink vertex</li>
</ul>
<p>Then:</p>
<blockquote>
<div><p><span class="math">\(pgr\_minCostMaxFlow(edges\_sql, source, sink) = \boldsymbol{\Phi}\)</span></p>
<p><span class="math">\(\boldsymbol{\Phi} = {(id_i, edge\_id_i, source_i, target_i, flow_i, residual\_capacity_i, cost_i, agg\_cost_i)}\)</span></p>
</div></blockquote>
<p>Where:</p>
<p><span class="math">\(\boldsymbol{\Phi}\)</span> is a subset of the original edges with their residual capacity, flow, cost and aggregate cost. The minimum cost through the graph can be obtained by aggregating on each edge and summing the sending cost of it. In particular:</p>
<ul class="simple">
<li><span class="math">\(id_i = i\)</span></li>
<li><span class="math">\(edge\_id = id_i\)</span> in edges_sql</li>
<li><span class="math">\(residual\_capacity_i = capacity_i - flow_i\)</span></li>
<li><span class="math">\(agg\_cost_i = agg\_cost_{i-1} + cost_i\)</span></li>
</ul>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.boost.org/libs/graph/doc/successive_shortest_path_nonnegative_weights.html">https://www.boost.org/libs/graph/doc/successive_shortest_path_nonnegative_weights.html</a></li>
</ul>
<p class="rubric">Indices and tables</p>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v3.0.0-dev.<br/>
      Last updated on Oct 06, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>