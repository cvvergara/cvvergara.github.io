<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GEOS: geos::operation::overlay::snap::LineStringSnapper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GEOS
   &#160;<span id="projectnumber">3.7.0dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeos.html">geos</a></li><li class="navelem"><a class="el" href="namespacegeos_1_1operation.html">operation</a></li><li class="navelem"><a class="el" href="namespacegeos_1_1operation_1_1overlay.html">overlay</a></li><li class="navelem"><a class="el" href="namespacegeos_1_1operation_1_1overlay_1_1snap.html">snap</a></li><li class="navelem"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html">LineStringSnapper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">geos::operation::overlay::snap::LineStringSnapper Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Snaps the vertices and segments of a LineString to a set of target snap vertices.  
 <a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac1ed05effa3c85f646a7be278f460fdc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ac1ed05effa3c85f646a7be278f460fdc">LineStringSnapper</a> (const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a59345d3a409b5d2ebe01fcfcdcca92cb">geom::Coordinate::Vect</a> &amp;nSrcPts, double nSnapTol)</td></tr>
<tr class="separator:ac1ed05effa3c85f646a7be278f460fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2c55c8e69e6a3545ef7642bcdb8664"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a59345d3a409b5d2ebe01fcfcdcca92cb">geom::Coordinate::Vect</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2c2c55c8e69e6a3545ef7642bcdb8664">snapTo</a> (const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;snapPts)</td></tr>
<tr class="separator:a2c2c55c8e69e6a3545ef7642bcdb8664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb13fd1f9b87bd5d8f42c7acacc4cc42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#adb13fd1f9b87bd5d8f42c7acacc4cc42">setAllowSnappingToSourceVertices</a> (bool allow)</td></tr>
<tr class="separator:adb13fd1f9b87bd5d8f42c7acacc4cc42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6c35dd1bebdcef0e2f88c9f16fe1ae1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a6c35dd1bebdcef0e2f88c9f16fe1ae1d">snapVertices</a> (<a class="el" href="classgeos_1_1geom_1_1CoordinateList.html">geom::CoordinateList</a> &amp;srcCoords, const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;snapPts)</td></tr>
<tr class="separator:a6c35dd1bebdcef0e2f88c9f16fe1ae1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62041f3ffae06f1ccfaa1e7e53fa410"><td class="memItemLeft" align="right" valign="top">geom::Coordinate::ConstVect::const_iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad62041f3ffae06f1ccfaa1e7e53fa410">findSnapForVertex</a> (const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html">geom::Coordinate</a> &amp;pt, const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;snapPts)</td></tr>
<tr class="separator:ad62041f3ffae06f1ccfaa1e7e53fa410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d00065de70108f90dedb6d5a0ce5d61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a7d00065de70108f90dedb6d5a0ce5d61">snapSegments</a> (<a class="el" href="classgeos_1_1geom_1_1CoordinateList.html">geom::CoordinateList</a> &amp;srcCoords, const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;snapPts)</td></tr>
<tr class="memdesc:a7d00065de70108f90dedb6d5a0ce5d61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Snap segments of the source to nearby snap vertices.  <a href="#a7d00065de70108f90dedb6d5a0ce5d61">More...</a><br /></td></tr>
<tr class="separator:a7d00065de70108f90dedb6d5a0ce5d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ca9da8999ad1ccb27123782695220d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a31ca9da8999ad1ccb27123782695220d">findSegmentToSnap</a> (const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html">geom::Coordinate</a> &amp;snapPt, <a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a> from, <a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a> too_far)</td></tr>
<tr class="memdesc:a31ca9da8999ad1ccb27123782695220d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a src segment which snaps to (is close to) the given snap point.  <a href="#a31ca9da8999ad1ccb27123782695220d">More...</a><br /></td></tr>
<tr class="separator:a31ca9da8999ad1ccb27123782695220d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412cdb92c6b2227336405d50737c6bc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a412cdb92c6b2227336405d50737c6bc8">findVertexToSnap</a> (const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html">geom::Coordinate</a> &amp;snapPt, <a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a> from, <a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a> too_far)</td></tr>
<tr class="separator:a412cdb92c6b2227336405d50737c6bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3676ab980bbd5ae639b3ba568af45f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a9f3676ab980bbd5ae639b3ba568af45f">LineStringSnapper</a> (const <a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html">LineStringSnapper</a> &amp;other)=delete</td></tr>
<tr class="separator:a9f3676ab980bbd5ae639b3ba568af45f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5badab1b1b47eb7deaadb21ffb7b2438"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html">LineStringSnapper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a5badab1b1b47eb7deaadb21ffb7b2438">operator=</a> (const <a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html">LineStringSnapper</a> &amp;rhs)=delete</td></tr>
<tr class="separator:a5badab1b1b47eb7deaadb21ffb7b2438"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2123bdd30ced8c296ab17521c491943a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a59345d3a409b5d2ebe01fcfcdcca92cb">geom::Coordinate::Vect</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">srcPts</a></td></tr>
<tr class="separator:a2123bdd30ced8c296ab17521c491943a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57be7c7162f7f1e8797d30404fd88635"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a></td></tr>
<tr class="separator:a57be7c7162f7f1e8797d30404fd88635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2745bb9a84915af4f1cd926ba4a1604"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad2745bb9a84915af4f1cd926ba4a1604">allowSnappingToSourceVertices</a></td></tr>
<tr class="separator:ad2745bb9a84915af4f1cd926ba4a1604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3caa4ef41463b3d33db5a86d17894719"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">isClosed</a></td></tr>
<tr class="separator:a3caa4ef41463b3d33db5a86d17894719"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Snaps the vertices and segments of a LineString to a set of target snap vertices. </p>
<p>A snapping distance tolerance is used to control where snapping is performed. </p>

<p>Definition at line <a class="el" href="LineStringSnapper_8h_source.html#l00051">51</a> of file <a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac1ed05effa3c85f646a7be278f460fdc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geos::operation::overlay::snap::LineStringSnapper::LineStringSnapper </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a59345d3a409b5d2ebe01fcfcdcca92cb">geom::Coordinate::Vect</a> &amp;&#160;</td>
          <td class="paramname"><em>nSrcPts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nSnapTol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a new snapper using the given points as source points to be snapped.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nSrcPts</td><td>the points to snap </td></tr>
    <tr><td class="paramname">nSnapTolerance</td><td>the snap tolerance to use </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="LineStringSnapper_8h_source.html#l00062">62</a> of file <a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    :</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">srcPts</a>(nSrcPts),</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a>(nSnapTol),</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad2745bb9a84915af4f1cd926ba4a1604">allowSnappingToSourceVertices</a>(<span class="keyword">false</span>)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">size_t</span> s = <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">srcPts</a>.size();</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">isClosed</a> = s &lt; 2 ? <span class="keyword">false</span> : <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">srcPts</a>[0].equals2D(<a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">srcPts</a>[s-1]);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a3caa4ef41463b3d33db5a86d17894719"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">geos::operation::overlay::snap::LineStringSnapper::isClosed</a></div><div class="ttdeci">bool isClosed</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00087">LineStringSnapper.h:87</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_ad2745bb9a84915af4f1cd926ba4a1604"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad2745bb9a84915af4f1cd926ba4a1604">geos::operation::overlay::snap::LineStringSnapper::allowSnappingToSourceVertices</a></div><div class="ttdeci">bool allowSnappingToSourceVertices</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00086">LineStringSnapper.h:86</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a2123bdd30ced8c296ab17521c491943a"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">geos::operation::overlay::snap::LineStringSnapper::srcPts</a></div><div class="ttdeci">const geom::Coordinate::Vect &amp; srcPts</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00082">LineStringSnapper.h:82</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a57be7c7162f7f1e8797d30404fd88635"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">geos::operation::overlay::snap::LineStringSnapper::snapTolerance</a></div><div class="ttdeci">double snapTolerance</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00084">LineStringSnapper.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9f3676ab980bbd5ae639b3ba568af45f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geos::operation::overlay::snap::LineStringSnapper::LineStringSnapper </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html">LineStringSnapper</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a31ca9da8999ad1ccb27123782695220d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> geos::operation::overlay::snap::LineStringSnapper::findSegmentToSnap </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html">geom::Coordinate</a> &amp;&#160;</td>
          <td class="paramname"><em>snapPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a>&#160;</td>
          <td class="paramname"><em>too_far</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds a src segment which snaps to (is close to) the given snap point. </p>
<p>Only a single segment is selected for snapping. This prevents multiple segments snapping to the same snap vertex, which would almost certainly cause invalid geometry to be created. (The heuristic approach to snapping used here is really only appropriate when snap pts snap to a unique spot on the src geometry.)</p>
<p>Also, if the snap vertex occurs as a vertex in the src coordinate list, no snapping is performed (may be changed using setAllowSnappingToSourceVertices).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td>an iterator to first point of first segment to be checked</td></tr>
    <tr><td class="paramname">too_far</td><td>an iterator to last point of last segment to be checked</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an iterator to the snapped segment or too_far if no segment needs snapping (either none within snapTol distance, or one found on the snapPt) </dd></dl>
<p>Check if the snap pt is equal to one of the segment endpoints.</p>
<p>If the snap pt is already in the src list, don't snap at all (unless allowSnappingToSourceVertices is set to true)</p>

<p>Definition at line <a class="el" href="LineStringSnapper_8cpp_source.html#l00381">381</a> of file <a class="el" href="LineStringSnapper_8cpp_source.html">LineStringSnapper.cpp</a>.</p>

<p>References <a class="el" href="LineSegment_8inl_source.html#l00082">geos::geom::LineSegment::distance()</a>, <a class="el" href="Coordinate_8inl_source.html#l00050">geos::geom::Coordinate::equals2D()</a>, <a class="el" href="LineSegment_8h_source.html#l00062">geos::geom::LineSegment::p0</a>, and <a class="el" href="LineSegment_8h_source.html#l00064">geos::geom::LineSegment::p1</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;{</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="classgeos_1_1geom_1_1LineSegment.html">LineSegment</a> seg;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordtype">double</span> minDist = <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a>; <span class="comment">// make sure the first closer then</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                  <span class="comment">// snapTolerance is accepted</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> match=too_far;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// TODO: use std::find_if</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">for</span> ( ; from != too_far; ++from)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    seg.<a class="code" href="classgeos_1_1geom_1_1LineSegment.html#ac3286355f41210086e4eab4498b46ba9">p0</a> = *from;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> to = from;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    ++to;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    seg.<a class="code" href="classgeos_1_1geom_1_1LineSegment.html#a9382e49d86a10de5d5be69560824d900">p1</a> = *to;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; Checking segment &quot;</span> &lt;&lt; seg &lt;&lt; endl;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> ( seg.<a class="code" href="classgeos_1_1geom_1_1LineSegment.html#ac3286355f41210086e4eab4498b46ba9">p0</a>.<a class="code" href="classgeos_1_1geom_1_1Coordinate.html#a28024184e569bb7843d97982276a0e09">equals2D</a>(snapPt) || seg.<a class="code" href="classgeos_1_1geom_1_1LineSegment.html#a9382e49d86a10de5d5be69560824d900">p1</a>.<a class="code" href="classgeos_1_1geom_1_1Coordinate.html#a28024184e569bb7843d97982276a0e09">equals2D</a>(snapPt) )</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad2745bb9a84915af4f1cd926ba4a1604">allowSnappingToSourceVertices</a>) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;   snap point matches a segment endpoint, checking next segment&quot;</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;     &lt;&lt; endl;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;   snap point matches a segment endpoint, giving up seek&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">return</span> too_far;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">double</span> dist = seg.<a class="code" href="classgeos_1_1geom_1_1LineSegment.html#a1dfe1ed55fbbae863ec62008a332a51b">distance</a>(snapPt);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> ( dist &gt;= minDist) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;   snap point distance &quot;</span> &lt;&lt; dist</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;     &lt;&lt; <span class="stringliteral">&quot; not smaller than tolerance &quot;</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;     &lt;&lt; <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a> &lt;&lt; <span class="stringliteral">&quot; or previous closest &quot;</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;     &lt;&lt; minDist &lt;&lt; endl;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;   snap point distance &quot;</span> &lt;&lt; dist &lt;&lt; <span class="stringliteral">&quot; within tolerance &quot;</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;         &lt;&lt; <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a> &lt;&lt; <span class="stringliteral">&quot; and closer than previous candidate &quot;</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         &lt;&lt; minDist &lt;&lt; endl;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> ( dist == 0.0 ) <span class="keywordflow">return</span> from; <span class="comment">// can&#39;t find any closer</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    match = from;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    minDist = dist;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">return</span> match;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div><div class="ttc" id="classgeos_1_1geom_1_1LineSegment_html"><div class="ttname"><a href="classgeos_1_1geom_1_1LineSegment.html">geos::geom::LineSegment</a></div><div class="ttdef"><b>Definition:</b> <a href="LineSegment_8h_source.html#l00057">LineSegment.h:57</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1LineSegment_html_a9382e49d86a10de5d5be69560824d900"><div class="ttname"><a href="classgeos_1_1geom_1_1LineSegment.html#a9382e49d86a10de5d5be69560824d900">geos::geom::LineSegment::p1</a></div><div class="ttdeci">Coordinate p1</div><div class="ttdoc">Segment start. </div><div class="ttdef"><b>Definition:</b> <a href="LineSegment_8h_source.html#l00064">LineSegment.h:64</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_ad2745bb9a84915af4f1cd926ba4a1604"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad2745bb9a84915af4f1cd926ba4a1604">geos::operation::overlay::snap::LineStringSnapper::allowSnappingToSourceVertices</a></div><div class="ttdeci">bool allowSnappingToSourceVertices</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00086">LineStringSnapper.h:86</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html_a28024184e569bb7843d97982276a0e09"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html#a28024184e569bb7843d97982276a0e09">geos::geom::Coordinate::equals2D</a></div><div class="ttdeci">bool equals2D(const Coordinate &amp;other) const </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8inl_source.html#l00050">Coordinate.inl:50</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1LineSegment_html_ac3286355f41210086e4eab4498b46ba9"><div class="ttname"><a href="classgeos_1_1geom_1_1LineSegment.html#ac3286355f41210086e4eab4498b46ba9">geos::geom::LineSegment::p0</a></div><div class="ttdeci">Coordinate p0</div><div class="ttdef"><b>Definition:</b> <a href="LineSegment_8h_source.html#l00062">LineSegment.h:62</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1CoordinateList_html_a1c5d129b14a3475478e8f9bd150153f8"><div class="ttname"><a href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geos::geom::CoordinateList::iterator</a></div><div class="ttdeci">std::list&lt; Coordinate &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CoordinateList_8h_source.html#l00059">CoordinateList.h:59</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a57be7c7162f7f1e8797d30404fd88635"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">geos::operation::overlay::snap::LineStringSnapper::snapTolerance</a></div><div class="ttdeci">double snapTolerance</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00084">LineStringSnapper.h:84</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1LineSegment_html_a1dfe1ed55fbbae863ec62008a332a51b"><div class="ttname"><a href="classgeos_1_1geom_1_1LineSegment.html#a1dfe1ed55fbbae863ec62008a332a51b">geos::geom::LineSegment::distance</a></div><div class="ttdeci">double distance(const LineSegment &amp;ls) const </div><div class="ttdoc">Computes the distance between this line segment and another one. </div><div class="ttdef"><b>Definition:</b> <a href="LineSegment_8inl_source.html#l00082">LineSegment.inl:82</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad62041f3ffae06f1ccfaa1e7e53fa410"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Coordinate::ConstVect::const_iterator geos::operation::overlay::snap::LineStringSnapper::findSnapForVertex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html">geom::Coordinate</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;&#160;</td>
          <td class="paramname"><em>snapPts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8cpp_source.html#l00178">178</a> of file <a class="el" href="LineStringSnapper_8cpp_source.html">LineStringSnapper.cpp</a>.</p>

<p>References <a class="el" href="Coordinate_8inl_source.html#l00081">geos::geom::Coordinate::distance()</a>, <a class="el" href="CoordinateList_8h_source.html#l00102">geos::geom::CoordinateList::end()</a>, and <a class="el" href="Coordinate_8inl_source.html#l00050">geos::geom::Coordinate::equals2D()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  Coordinate::ConstVect::const_iterator end = snapPts.end();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  Coordinate::ConstVect::const_iterator candidate = end;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordtype">double</span> minDist = <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// TODO: use std::find_if</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">for</span> ( Coordinate::ConstVect::const_iterator</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      it=snapPts.begin();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      it != end;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      ++it)</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    assert(*it);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">const</span> <a class="code" href="classgeos_1_1geom_1_1Coordinate.html">Coordinate</a>&amp; snapPt = *(*it);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> ( snapPt.<a class="code" href="classgeos_1_1geom_1_1Coordinate.html#a28024184e569bb7843d97982276a0e09">equals2D</a>(pt) )</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; points are equal, returning not-found &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">return</span> end;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordtype">double</span> dist = snapPt.<a class="code" href="classgeos_1_1geom_1_1Coordinate.html#aa6671e96d518c783431e0c5421ac5e42">distance</a>(pt);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; distance from snap point &quot;</span> &lt;&lt; snapPt &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; dist &lt;&lt; endl;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> ( dist &lt; minDist )</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      minDist = dist;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      candidate = it;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> ( candidate == end ) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; no snap point within distance, returning not-found&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">return</span> candidate;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html">geos::geom::Coordinate</a></div><div class="ttdoc">Coordinate is the lightweight class used to store coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8h_source.html#l00060">Coordinate.h:60</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html_a28024184e569bb7843d97982276a0e09"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html#a28024184e569bb7843d97982276a0e09">geos::geom::Coordinate::equals2D</a></div><div class="ttdeci">bool equals2D(const Coordinate &amp;other) const </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8inl_source.html#l00050">Coordinate.inl:50</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html_aa6671e96d518c783431e0c5421ac5e42"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html#aa6671e96d518c783431e0c5421ac5e42">geos::geom::Coordinate::distance</a></div><div class="ttdeci">double distance(const Coordinate &amp;p) const </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8inl_source.html#l00081">Coordinate.inl:81</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a57be7c7162f7f1e8797d30404fd88635"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">geos::operation::overlay::snap::LineStringSnapper::snapTolerance</a></div><div class="ttdeci">double snapTolerance</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00084">LineStringSnapper.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a412cdb92c6b2227336405d50737c6bc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> geos::operation::overlay::snap::LineStringSnapper::findVertexToSnap </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html">geom::Coordinate</a> &amp;&#160;</td>
          <td class="paramname"><em>snapPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geom::CoordinateList::iterator</a>&#160;</td>
          <td class="paramname"><em>too_far</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8cpp_source.html#l00067">67</a> of file <a class="el" href="LineStringSnapper_8cpp_source.html">LineStringSnapper.cpp</a>.</p>

<p>References <a class="el" href="Coordinate_8inl_source.html#l00081">geos::geom::Coordinate::distance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordtype">double</span> minDist = <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a>; <span class="comment">// make sure the first closer then</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                  <span class="comment">// snapTolerance is accepted</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> match=too_far;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">for</span> ( ; from != too_far; ++from)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1Coordinate.html">Coordinate</a>&amp; c0 = *from;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; Checking vertex &quot;</span> &lt;&lt; c0 &lt;&lt; endl;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">double</span> dist = c0.<a class="code" href="classgeos_1_1geom_1_1Coordinate.html#aa6671e96d518c783431e0c5421ac5e42">distance</a>(snapPt);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> ( dist &gt;= minDist) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;   snap point distance &quot;</span> &lt;&lt; dist</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;     &lt;&lt; <span class="stringliteral">&quot; not smaller than tolerance &quot;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;     &lt;&lt; <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a> &lt;&lt; <span class="stringliteral">&quot; or previous closest &quot;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;     &lt;&lt; minDist &lt;&lt; endl;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;   snap point distance &quot;</span> &lt;&lt; dist &lt;&lt; <span class="stringliteral">&quot; within tolerance &quot;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;         &lt;&lt; <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">snapTolerance</a> &lt;&lt; <span class="stringliteral">&quot; and closer than previous candidate &quot;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;         &lt;&lt; minDist &lt;&lt; endl;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> ( dist == 0.0 ) <span class="keywordflow">return</span> from; <span class="comment">// can&#39;t find any closer</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    match = from;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    minDist = dist;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> match;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html">geos::geom::Coordinate</a></div><div class="ttdoc">Coordinate is the lightweight class used to store coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8h_source.html#l00060">Coordinate.h:60</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html_aa6671e96d518c783431e0c5421ac5e42"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html#aa6671e96d518c783431e0c5421ac5e42">geos::geom::Coordinate::distance</a></div><div class="ttdeci">double distance(const Coordinate &amp;p) const </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8inl_source.html#l00081">Coordinate.inl:81</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1CoordinateList_html_a1c5d129b14a3475478e8f9bd150153f8"><div class="ttname"><a href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geos::geom::CoordinateList::iterator</a></div><div class="ttdeci">std::list&lt; Coordinate &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CoordinateList_8h_source.html#l00059">CoordinateList.h:59</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a57be7c7162f7f1e8797d30404fd88635"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a57be7c7162f7f1e8797d30404fd88635">geos::operation::overlay::snap::LineStringSnapper::snapTolerance</a></div><div class="ttdeci">double snapTolerance</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00084">LineStringSnapper.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5badab1b1b47eb7deaadb21ffb7b2438"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html">LineStringSnapper</a>&amp; geos::operation::overlay::snap::LineStringSnapper::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html">LineStringSnapper</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adb13fd1f9b87bd5d8f42c7acacc4cc42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geos::operation::overlay::snap::LineStringSnapper::setAllowSnappingToSourceVertices </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8h_source.html#l00076">76</a> of file <a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                                    {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad2745bb9a84915af4f1cd926ba4a1604">allowSnappingToSourceVertices</a> = allow;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div><div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_ad2745bb9a84915af4f1cd926ba4a1604"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#ad2745bb9a84915af4f1cd926ba4a1604">geos::operation::overlay::snap::LineStringSnapper::allowSnappingToSourceVertices</a></div><div class="ttdeci">bool allowSnappingToSourceVertices</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00086">LineStringSnapper.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d00065de70108f90dedb6d5a0ce5d61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geos::operation::overlay::snap::LineStringSnapper::snapSegments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html">geom::CoordinateList</a> &amp;&#160;</td>
          <td class="paramname"><em>srcCoords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;&#160;</td>
          <td class="paramname"><em>snapPts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Snap segments of the source to nearby snap vertices. </p>
<p>Source segments are "cracked" at a snap vertex. A single input segment may be snapped several times to different snap vertices.</p>
<p>For each distinct snap vertex, at most one source segment is snapped to. This prevents "cracking" multiple segments at the same point, which would likely cause topology collapse when being used on polygonal linework.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srcCoords</td><td>the coordinates of the source linestring to be snapped the object will be modified (coords snapped) </td></tr>
    <tr><td class="paramname">snapPts</td><td>the target snap vertices </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="LineStringSnapper_8cpp_source.html#l00226">226</a> of file <a class="el" href="LineStringSnapper_8cpp_source.html">LineStringSnapper.cpp</a>.</p>

<p>References <a class="el" href="CoordinateList_8h_source.html#l00097">geos::geom::CoordinateList::begin()</a>, <a class="el" href="LineSegment_8inl_source.html#l00082">geos::geom::LineSegment::distance()</a>, <a class="el" href="CoordinateList_8h_source.html#l00092">geos::geom::CoordinateList::empty()</a>, <a class="el" href="CoordinateList_8h_source.html#l00102">geos::geom::CoordinateList::end()</a>, <a class="el" href="Interrupt_8h_source.html#l00023">GEOS_CHECK_FOR_INTERRUPTS</a>, <a class="el" href="CoordinateList_8h_source.html#l00130">geos::geom::CoordinateList::insert()</a>, <a class="el" href="LineSegment_8h_source.html#l00062">geos::geom::LineSegment::p0</a>, <a class="el" href="LineSegment_8h_source.html#l00064">geos::geom::LineSegment::p1</a>, and <a class="el" href="LineSegment_8cpp_source.html#l00065">geos::geom::LineSegment::projectionFactor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;{</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// nothing to do if there are no source coords..</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> ( srcCoords.empty() ) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="Interrupt_8h.html#a281caf51abbd49fa07b5ac1e371723ff">GEOS_CHECK_FOR_INTERRUPTS</a>();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;Snapping segments of: &quot;</span> &lt;&lt; srcCoords &lt;&lt; endl;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">for</span> ( Coordinate::ConstVect::const_iterator</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      it=snapPts.begin(), end=snapPts.end();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      it != end;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      ++it)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    assert(*it);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">const</span> <a class="code" href="classgeos_1_1geom_1_1Coordinate.html">Coordinate</a>&amp; snapPt = *(*it);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;Checking for a segment to snap to snapPt &quot;</span> &lt;&lt; snapPt &lt;&lt; endl;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> too_far = srcCoords.end(); --too_far;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> segpos =</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a31ca9da8999ad1ccb27123782695220d">findSegmentToSnap</a>(snapPt, srcCoords.begin(), too_far);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> ( segpos == too_far)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; No segment to snap&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">/* Check if the snap point falls outside of the segment */</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// If the snap point is outside, this means that an endpoint</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// was not snap where it should have been</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// so what we should do is re-snap the endpoint to this</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// snapPt and then snap the closest between this and</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// previous (for pf &lt; 0.0) or next (for pf &gt; 1.0) segment</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// to the old endpoint.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">//     --strk May 2013</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// TODO: simplify this code, make more readable</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> to = segpos; ++to;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1LineSegment.html">LineSegment</a> seg(*segpos, *to);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">double</span> pf = seg.projectionFactor(snapPt);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> ( pf &gt;= 1.0 ) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot; Segment to be snapped is closer on his end point&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="classgeos_1_1geom_1_1Coordinate.html">Coordinate</a> newSnapPt = seg.p1;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      *to = seg.p1 = snapPt;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="comment">// now snap from-to (segpos) or to-next (segpos++) to newSnapPt</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">if</span> ( to == too_far ) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">isClosed</a> ) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot; His end point is the last one, but is closed &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          *(srcCoords.begin()) = snapPt; <span class="comment">// sync to start point</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          to = srcCoords.begin();</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot; His end point is the last one, inserting &quot;</span> &lt;&lt; newSnapPt &lt;&lt; <span class="stringliteral">&quot; before it&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          srcCoords.insert(to, newSnapPt);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      ++to;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="classgeos_1_1geom_1_1LineSegment.html">LineSegment</a> nextSeg(seg.p1, *to);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> ( nextSeg.distance(newSnapPt) &lt; seg.distance(newSnapPt) ) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot; Next segment closer, inserting &quot;</span> &lt;&lt; newSnapPt &lt;&lt; <span class="stringliteral">&quot; into &quot;</span> &lt;&lt; nextSeg &lt;&lt; endl;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment">// insert into next segment</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        srcCoords.insert(to, newSnapPt);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot; This segment closer, inserting &quot;</span> &lt;&lt; newSnapPt &lt;&lt; <span class="stringliteral">&quot; into &quot;</span> &lt;&lt; seg &lt;&lt; endl;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">// insert must happen one-past first point (before next point)</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        ++segpos;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        srcCoords.insert(segpos, newSnapPt);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( pf &lt;= 0.0 ) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot; Segment to be snapped is closer on his start point&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <a class="code" href="classgeos_1_1geom_1_1Coordinate.html">Coordinate</a> newSnapPt = seg.p0;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      *segpos = seg.p0 = snapPt;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="comment">// now snap prev-from (--segpos) or from-to (segpos) to newSnapPt</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">if</span> ( segpos == srcCoords.begin() ) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">isClosed</a> ) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot; His start point is the first one, but is closed &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          segpos = srcCoords.end(); --segpos;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          *segpos = snapPt; <span class="comment">// sync to end point</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot; His start point is the first one, inserting &quot;</span> &lt;&lt; newSnapPt &lt;&lt; <span class="stringliteral">&quot; before it&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          ++segpos;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          srcCoords.insert(segpos, newSnapPt);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; Before seg-snapping, srcCoors are: &quot;</span> &lt;&lt; srcCoords &lt;&lt; endl;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      --segpos;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <a class="code" href="classgeos_1_1geom_1_1LineSegment.html">LineSegment</a> prevSeg(*segpos, seg.p0);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">if</span> ( prevSeg.distance(newSnapPt) &lt; seg.distance(newSnapPt) ) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot; Prev segment closer, inserting &quot;</span> &lt;&lt; newSnapPt &lt;&lt; <span class="stringliteral">&quot; into &quot;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;             &lt;&lt; prevSeg &lt;&lt; endl;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="comment">// insert into prev segment</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        ++segpos;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        srcCoords.insert(segpos, newSnapPt);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot; This segment closer, inserting &quot;</span> &lt;&lt; newSnapPt &lt;&lt; <span class="stringliteral">&quot; into &quot;</span> &lt;&lt; seg &lt;&lt; endl;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">// insert must happen one-past first point (before next point)</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        srcCoords.insert(to, newSnapPt);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="comment">//assert(pf != 0.0);</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; Segment to be snapped found, projection factor is &quot;</span> &lt;&lt; pf &lt;&lt; <span class="stringliteral">&quot;, inserting point&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="comment">// insert must happen one-past first point (before next point)</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      ++segpos;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      srcCoords.insert(segpos, snapPt);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; After segment snapping, srcCoors are: &quot;</span> &lt;&lt; srcCoords &lt;&lt; endl;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div><div class="ttc" id="classgeos_1_1geom_1_1LineSegment_html"><div class="ttname"><a href="classgeos_1_1geom_1_1LineSegment.html">geos::geom::LineSegment</a></div><div class="ttdef"><b>Definition:</b> <a href="LineSegment_8h_source.html#l00057">LineSegment.h:57</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a3caa4ef41463b3d33db5a86d17894719"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">geos::operation::overlay::snap::LineStringSnapper::isClosed</a></div><div class="ttdeci">bool isClosed</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00087">LineStringSnapper.h:87</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html">geos::geom::Coordinate</a></div><div class="ttdoc">Coordinate is the lightweight class used to store coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8h_source.html#l00060">Coordinate.h:60</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1CoordinateList_html_a1c5d129b14a3475478e8f9bd150153f8"><div class="ttname"><a href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geos::geom::CoordinateList::iterator</a></div><div class="ttdeci">std::list&lt; Coordinate &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CoordinateList_8h_source.html#l00059">CoordinateList.h:59</a></div></div>
<div class="ttc" id="Interrupt_8h_html_a281caf51abbd49fa07b5ac1e371723ff"><div class="ttname"><a href="Interrupt_8h.html#a281caf51abbd49fa07b5ac1e371723ff">GEOS_CHECK_FOR_INTERRUPTS</a></div><div class="ttdeci">#define GEOS_CHECK_FOR_INTERRUPTS()</div><div class="ttdef"><b>Definition:</b> <a href="Interrupt_8h_source.html#l00023">Interrupt.h:23</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a31ca9da8999ad1ccb27123782695220d"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a31ca9da8999ad1ccb27123782695220d">geos::operation::overlay::snap::LineStringSnapper::findSegmentToSnap</a></div><div class="ttdeci">geom::CoordinateList::iterator findSegmentToSnap(const geom::Coordinate &amp;snapPt, geom::CoordinateList::iterator from, geom::CoordinateList::iterator too_far)</div><div class="ttdoc">Finds a src segment which snaps to (is close to) the given snap point. </div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8cpp_source.html#l00381">LineStringSnapper.cpp:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2c2c55c8e69e6a3545ef7642bcdb8664"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a59345d3a409b5d2ebe01fcfcdcca92cb">Coordinate::Vect</a> &gt; geos::operation::overlay::snap::LineStringSnapper::snapTo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;&#160;</td>
          <td class="paramname"><em>snapPts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8cpp_source.html#l00055">55</a> of file <a class="el" href="LineStringSnapper_8cpp_source.html">LineStringSnapper.cpp</a>.</p>

<p>References <a class="el" href="CoordinateList_8h_source.html#l00154">geos::geom::CoordinateList::toCoordinateArray()</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  geom::CoordinateList coordList(<a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">srcPts</a>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a6c35dd1bebdcef0e2f88c9f16fe1ae1d">snapVertices</a>(coordList, snapPts);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a7d00065de70108f90dedb6d5a0ce5d61">snapSegments</a>(coordList, snapPts);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> coordList.toCoordinateArray();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a6c35dd1bebdcef0e2f88c9f16fe1ae1d"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a6c35dd1bebdcef0e2f88c9f16fe1ae1d">geos::operation::overlay::snap::LineStringSnapper::snapVertices</a></div><div class="ttdeci">void snapVertices(geom::CoordinateList &amp;srcCoords, const geom::Coordinate::ConstVect &amp;snapPts)</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8cpp_source.html#l00114">LineStringSnapper.cpp:114</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a2123bdd30ced8c296ab17521c491943a"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a2123bdd30ced8c296ab17521c491943a">geos::operation::overlay::snap::LineStringSnapper::srcPts</a></div><div class="ttdeci">const geom::Coordinate::Vect &amp; srcPts</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00082">LineStringSnapper.h:82</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a7d00065de70108f90dedb6d5a0ce5d61"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a7d00065de70108f90dedb6d5a0ce5d61">geos::operation::overlay::snap::LineStringSnapper::snapSegments</a></div><div class="ttdeci">void snapSegments(geom::CoordinateList &amp;srcCoords, const geom::Coordinate::ConstVect &amp;snapPts)</div><div class="ttdoc">Snap segments of the source to nearby snap vertices. </div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8cpp_source.html#l00226">LineStringSnapper.cpp:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6c35dd1bebdcef0e2f88c9f16fe1ae1d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geos::operation::overlay::snap::LineStringSnapper::snapVertices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgeos_1_1geom_1_1CoordinateList.html">geom::CoordinateList</a> &amp;&#160;</td>
          <td class="paramname"><em>srcCoords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a1735d833ea7d033b82c317f883948525">geom::Coordinate::ConstVect</a> &amp;&#160;</td>
          <td class="paramname"><em>snapPts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8cpp_source.html#l00114">114</a> of file <a class="el" href="LineStringSnapper_8cpp_source.html">LineStringSnapper.cpp</a>.</p>

<p>References <a class="el" href="CoordinateList_8h_source.html#l00097">geos::geom::CoordinateList::begin()</a>, <a class="el" href="CoordinateList_8h_source.html#l00092">geos::geom::CoordinateList::empty()</a>, <a class="el" href="CoordinateList_8h_source.html#l00102">geos::geom::CoordinateList::end()</a>, and <a class="el" href="Interrupt_8h_source.html#l00023">GEOS_CHECK_FOR_INTERRUPTS</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// nothing to do if there are no source coords..</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span> ( srcCoords.empty() ) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;Snapping vertices of: &quot;</span> &lt;&lt; srcCoords &lt;&lt; endl;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">for</span> ( Coordinate::ConstVect::const_iterator</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      it=snapPts.begin(), end=snapPts.end();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      it != end;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      ++it)</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <a class="code" href="Interrupt_8h.html#a281caf51abbd49fa07b5ac1e371723ff">GEOS_CHECK_FOR_INTERRUPTS</a>();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    assert(*it);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">const</span> <a class="code" href="classgeos_1_1geom_1_1Coordinate.html">Coordinate</a>&amp; snapPt = *(*it);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot;Checking for a vertex to snap to snapPt &quot;</span> &lt;&lt; snapPt &lt;&lt; endl;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> too_far = srcCoords.end();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">isClosed</a> ) --too_far;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">CoordinateList::iterator</a> vertpos =</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a412cdb92c6b2227336405d50737c6bc8">findVertexToSnap</a>(snapPt, srcCoords.begin(), too_far);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> ( vertpos == too_far)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; No vertex to snap&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; Vertex to be snapped found, snapping&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    *vertpos = snapPt;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// keep final closing point in synch (rings only)</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (vertpos == srcCoords.begin() &amp;&amp; <a class="code" href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">isClosed</a>)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      vertpos = srcCoords.end(); --vertpos;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; Snapped vertex was first in a closed line, also snapping last&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      *vertpos = snapPt;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; After snapping of vertex &quot;</span> &lt;&lt; snapPt &lt;&lt; <span class="stringliteral">&quot;, srcCoors are: &quot;</span> &lt;&lt; srcCoords &lt;&lt; endl;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#if GEOS_DEBUG</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;cerr &lt;&lt; <span class="stringliteral">&quot; After vertices snapping, srcCoors are: &quot;</span> &lt;&lt; srcCoords &lt;&lt; endl;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a3caa4ef41463b3d33db5a86d17894719"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a3caa4ef41463b3d33db5a86d17894719">geos::operation::overlay::snap::LineStringSnapper::isClosed</a></div><div class="ttdeci">bool isClosed</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8h_source.html#l00087">LineStringSnapper.h:87</a></div></div>
<div class="ttc" id="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper_html_a412cdb92c6b2227336405d50737c6bc8"><div class="ttname"><a href="classgeos_1_1operation_1_1overlay_1_1snap_1_1LineStringSnapper.html#a412cdb92c6b2227336405d50737c6bc8">geos::operation::overlay::snap::LineStringSnapper::findVertexToSnap</a></div><div class="ttdeci">geom::CoordinateList::iterator findVertexToSnap(const geom::Coordinate &amp;snapPt, geom::CoordinateList::iterator from, geom::CoordinateList::iterator too_far)</div><div class="ttdef"><b>Definition:</b> <a href="LineStringSnapper_8cpp_source.html#l00067">LineStringSnapper.cpp:67</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1Coordinate_html"><div class="ttname"><a href="classgeos_1_1geom_1_1Coordinate.html">geos::geom::Coordinate</a></div><div class="ttdoc">Coordinate is the lightweight class used to store coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="Coordinate_8h_source.html#l00060">Coordinate.h:60</a></div></div>
<div class="ttc" id="classgeos_1_1geom_1_1CoordinateList_html_a1c5d129b14a3475478e8f9bd150153f8"><div class="ttname"><a href="classgeos_1_1geom_1_1CoordinateList.html#a1c5d129b14a3475478e8f9bd150153f8">geos::geom::CoordinateList::iterator</a></div><div class="ttdeci">std::list&lt; Coordinate &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CoordinateList_8h_source.html#l00059">CoordinateList.h:59</a></div></div>
<div class="ttc" id="Interrupt_8h_html_a281caf51abbd49fa07b5ac1e371723ff"><div class="ttname"><a href="Interrupt_8h.html#a281caf51abbd49fa07b5ac1e371723ff">GEOS_CHECK_FOR_INTERRUPTS</a></div><div class="ttdeci">#define GEOS_CHECK_FOR_INTERRUPTS()</div><div class="ttdef"><b>Definition:</b> <a href="Interrupt_8h_source.html#l00023">Interrupt.h:23</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ad2745bb9a84915af4f1cd926ba4a1604"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool geos::operation::overlay::snap::LineStringSnapper::allowSnappingToSourceVertices</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8h_source.html#l00086">86</a> of file <a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3caa4ef41463b3d33db5a86d17894719"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool geos::operation::overlay::snap::LineStringSnapper::isClosed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8h_source.html#l00087">87</a> of file <a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57be7c7162f7f1e8797d30404fd88635"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double geos::operation::overlay::snap::LineStringSnapper::snapTolerance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8h_source.html#l00084">84</a> of file <a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2123bdd30ced8c296ab17521c491943a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classgeos_1_1geom_1_1Coordinate.html#a59345d3a409b5d2ebe01fcfcdcca92cb">geom::Coordinate::Vect</a>&amp; geos::operation::overlay::snap::LineStringSnapper::srcPts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LineStringSnapper_8h_source.html#l00082">82</a> of file <a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/vicky/potree/geos/vicky/include/geos/operation/overlay/snap/<a class="el" href="LineStringSnapper_8h_source.html">LineStringSnapper.h</a></li>
<li>/home/vicky/potree/geos/vicky/src/operation/overlay/snap/<a class="el" href="LineStringSnapper_8cpp_source.html">LineStringSnapper.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
